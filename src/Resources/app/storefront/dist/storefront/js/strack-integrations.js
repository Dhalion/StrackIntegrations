"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["strack-integrations"],{1606:(t,e,r)=>{var i=r(9068),s=r(6285),n=r(3206),o=r(8254),a=r(4690);class c extends s.Z{init(){this.quantityInput=n.Z.querySelector(this.el.parentNode,"[data-quantity-selector] input",!1),this.quantityInput&&(this.productId=this.el.getAttribute("data-product-id"),this.customerPriceEndpoint=this.el.getAttribute("data-customer-price-endpoint"),this.isComponent="1"===this.el.getAttribute("data-is-component"),this.buyWidgetPriceContainer=n.Z.querySelector(document,".product-detail-price-container"),this.client=new o.Z(window.accessKey,window.contextToken),this.registerEventListeners())}registerEventListeners(){this.quantityInput.addEventListener("change",this.onQuantityChange.bind(this))}onQuantityChange(){this.createLoadingIndicator(),this.client.post(this.customerPriceEndpoint,JSON.stringify({productId:this.productId,quantity:this.quantityInput.value,isComponent:this.isComponent}),(t=>{this.replaceCustomerPrice(t),this.removeLoadingIndicator()}))}replaceCustomerPrice(t){this.buyWidgetPriceContainer.innerHTML=t}createLoadingIndicator(){a.Z.create(this.el.parentNode)}removeLoadingIndicator(){a.Z.remove(this.el.parentNode)}}var d,u,l,h=r(9658);class y extends s.Z{init(){try{this.searchInput=n.Z.querySelector(document,this.options.searchInputSel),this.searchReset=n.Z.querySelector(document,this.options.searchResetSel),this.accordionItems=n.Z.querySelectorAll(document,this.options.accordionSel),this.sortingButtons=n.Z.querySelectorAll(document,this.options.btnSortSel)}catch(t){return}this._registerEventListeners(),this._runObserver()}_registerEventListeners(){const t=h.Z.isTouchDevice()?"touchstart":"click";this.searchInput.addEventListener("input",this._onSearchOrder.bind(this)),this.searchReset.addEventListener(t,this._onSearchReset.bind(this)),this.sortingButtons.forEach((e=>{e.addEventListener(t,this._sortBy.bind(this))}))}_initPlugins(){window.PluginManager.initializePlugins()}_sortBy(){let t,e;try{t=n.Z.querySelector(document,this.options.accordionContSel)}catch(t){return}let r=Array.from(t.children);if(r.forEach((t=>{t.classList.remove("b2b-accordion--open")})),this.sortingButtons.forEach((t=>{event.currentTarget.dataset.sortingType!==t.dataset.sortingType&&(t.classList.remove(this.options.btnSortActiveCls),t.setAttribute("data-sorting-direction","default"))})),event.currentTarget.classList.add(this.options.btnSortActiveCls),"default"===event.currentTarget.dataset.sortingDirection)event.currentTarget.setAttribute("data-sorting-direction","asc");else{if("asc"!==event.currentTarget.dataset.sortingDirection){this.sortingButtons.forEach((t=>{t.setAttribute("data-sorting-direction","default")}));let e=r.sort(((t,e)=>{let r=new Date(t.dataset.sortByDate);return new Date(e.dataset.sortByDate)-r}));return t.innerHTML="",void e.forEach((e=>t.append(e)))}event.currentTarget.setAttribute("data-sorting-direction","desc")}e=event.currentTarget.dataset.sortingType;let i=r.sort(((t,r)=>{if("asc"===event.currentTarget.dataset.sortingDirection){if("by-order-number"===e)return t.dataset.sortByOrderNumber-r.dataset.sortByOrderNumber;if("by-reference"===e)return t.dataset.sortByReference-r.dataset.sortByReference;if("by-date"===e){return new Date(t.dataset.sortByDate)-new Date(r.dataset.sortByDate)}if("by-status"===e)return t.dataset.sortByStatus-r.dataset.sortByStatus;if("by-total"===e)return t.dataset.sortByTotal-r.dataset.sortByTotal}else{if("desc"!==event.currentTarget.dataset.sortingDirection){let e=new Date(t.dataset.sortByDate);return new Date(r.dataset.sortByDate)-e}if("by-order-number"===e)return r.dataset.sortByOrderNumber-t.dataset.sortByOrderNumber;if("by-reference"===e)return r.dataset.sortByReference-t.dataset.sortByReference;if("by-date"===e){let e=new Date(t.dataset.sortByDate);return new Date(r.dataset.sortByDate)-e}if("by-status"===e)return r.dataset.sortByStatus-t.dataset.sortByStatus;if("by-total"===e)return r.dataset.sortByTotal-t.dataset.sortByTotal}}));t.innerHTML="",i.forEach((e=>t.append(e)))}_onSearchOrder(){let t,e,r,i;t=this.searchInput.value.toUpperCase(),this.accordionItems.forEach((s=>{try{r=n.Z.querySelector(s,this.options.accordionTitleSel)}catch(t){return}try{i=n.Z.querySelector(s,this.options.accordionBodySel)}catch(t){return}e=r.innerHTML+i.innerHTML,e=e.toUpperCase(),e.includes(t)?s.style.display="":s.style.display="none"}))}_onSearchReset(){this.accordionItems.forEach((t=>{t.style.display=""}))}_runObserver(){new MutationObserver(((t,e)=>{for(const e of t)if("childList"===e.type){try{this.openAccordion=n.Z.querySelector(this.el,".b2b-accordion--open")}catch(t){return}this.openAccordion&&this._initPlugins()}})).observe(this.el,{attributes:!0,childList:!0,subtree:!0})}}d=y,l={searchInputSel:".b2b-order-search-input",searchResetSel:".b2b-order-search-reset",accordionContSel:".b2b-order-search-results",accordionSel:".b2b-accordion",accordionTitleSel:".b2b-accordion__title",accordionBodySel:".b2b-accordion__body",btnSortSel:".btn-sort",btnSortActiveCls:"active-sorting"},(u=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(u="options"))in d?Object.defineProperty(d,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):d[u]=l,i.Z.register("QuantitySelectorCustomerPrice",c,"[data-quantity-selector-customer-price]"),i.Z.register("AgiqonB2bOrderList",y,"[data-b2b-order-list]")}},t=>{t.O(0,["vendor-node","vendor-shared"],(()=>{return e=1606,t(t.s=e);var e}));t.O()}]);